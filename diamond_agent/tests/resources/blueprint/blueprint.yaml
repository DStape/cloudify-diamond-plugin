imports:
    - http://www.getcloudify.org/spec/cloudify/3.1/types.yaml

plugins:
    diamond:
        derived_from: cloudify.plugins.manager_plugin

inputs:
    diamond_config: {}

node_types:
    monitor_type:
        derived_from: cloudify.types.base

node_templates:
    node:
        type: monitor_type

        interfaces:
            cloudify.interfaces.monitor_lifecycle:
                - start:
                    mapping: diamond.diamond_agent.tasks.install
                    properties:
                        diamond_config: { get_input: diamond_config }
                - stop: diamond.diamond_agent.tasks.uninstall
