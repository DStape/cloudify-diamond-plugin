tosca_definitions_version: cloudify_1_0

imports:
    - https://raw.githubusercontent.com/cloudify-cosmo/cloudify-manager/master/resources/rest-service/cloudify/types/types.yaml

plugins:
    diamond:
        executor: central_deployment_agent
        install: false

inputs:
    diamond_config: {}

node_types:
    monitor_type:
        derived_from: cloudify.types.base

node_templates:
    node:
        type: monitor_type

        interfaces:
            cloudify.interfaces.monitor_lifecycle:
                - start:
                    mapping: diamond.diamond_agent.tasks.install
                    properties:
                        diamond_config: { get_input: diamond_config }
                - stop: diamond.diamond_agent.tasks.uninstall
